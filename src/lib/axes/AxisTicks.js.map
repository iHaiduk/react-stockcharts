{"version":3,"sources":["../../../src/lib/axes/AxisTicks.js"],"names":["tickTransform_svg_axisX","scale","tick","Math","round","tickTransform_svg_axisY","Tick","props","transform","tickStroke","tickStrokeOpacity","textAnchor","fontSize","fontFamily","x","y","x2","y2","dy","children","drawOnCanvasStatic","ctx","result","tickTransform","canvas_dy","format","origin","beginPath","moveTo","lineTo","stroke","fillText","AxisTicks","helper","ticks","map","idx","defaultProps","innerTickSize","tickPadding","orient","tickFormat","tickArguments","tickValues","apply","domain","baseFormat","d","sign","tickSpacing","max","xScale","yScale","xAxis","strokeStyle","font","fillStyle","textAlign","forEach"],"mappings":"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","file":"AxisTicks.js","sourcesContent":["\"use strict\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { hexToRGBA, isNotDefined, identity } from \"../utils\";\n\nfunction tickTransform_svg_axisX(scale, tick) {\n\treturn [Math.round(scale(tick)), 0];\n}\n\nfunction tickTransform_svg_axisY(scale, tick) {\n\treturn [0, Math.round(scale(tick))];\n}\n\nclass Tick extends Component {\n\trender() {\n\t\tconst { transform, tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = this.props;\n\t\tconst { x, y, x2, y2, dy } = this.props;\n\t\treturn (\n\t\t\t<g className=\"tick\" transform={`translate(${ transform[0] }, ${ transform[1] })`} >\n\t\t\t\t<line shapeRendering=\"crispEdges\" opacity={tickStrokeOpacity} stroke={tickStroke} x2={x2} y2={y2} />\n\t\t\t\t<text\n\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\tfill={tickStroke}\n\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\ttextAnchor={textAnchor}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</text>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTick.propTypes = {\n\ttransform: PropTypes.arrayOf(Number),\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n\ttextAnchor: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tfontFamily: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tx2: PropTypes.number,\n\ty2: PropTypes.number,\n\tdy: PropTypes.string,\n\tchildren: PropTypes.node.isRequired,\n};\n\nTick.drawOnCanvasStatic = (tick, ctx, result) => {\n\tconst { scale, tickTransform, canvas_dy, x, y, x2, y2, format } = result;\n\n\tconst origin = tickTransform(scale, tick);\n\n\tctx.beginPath();\n\n\tctx.moveTo(origin[0], origin[1]);\n\tctx.lineTo(origin[0] + x2, origin[1] + y2);\n\tctx.stroke();\n\n\tctx.fillText(format(tick), origin[0] + x, origin[1] + y + canvas_dy);\n};\n\nclass AxisTicks extends Component {\n\trender() {\n\t\tconst result = AxisTicks.helper(this.props, this.props.scale);\n\t\tconst { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format } = result;\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t{ticks.map((tick, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tick key={idx} transform={tickTransform(scale, tick)}\n\t\t\t\t\t\t\ttickStroke={tickStroke} tickStrokeOpacity={tickStrokeOpacity}\n\t\t\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\t\t\tx2={x2} y2={y2} textAnchor={textAnchor}\n\t\t\t\t\t\t\tfontSize={fontSize} fontFamily={fontFamily}>{format(tick)}</Tick>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nAxisTicks.propTypes = {\n\torient: PropTypes.oneOf([\"top\", \"bottom\", \"left\", \"right\"]).isRequired,\n\tinnerTickSize: PropTypes.number,\n\ttickFormat: PropTypes.func,\n\ttickPadding: PropTypes.number,\n\tticks: PropTypes.array,\n\ttickValues: PropTypes.array,\n\tscale: PropTypes.func.isRequired,\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n};\n\nAxisTicks.defaultProps = {\n\tinnerTickSize: 5,\n\ttickPadding: 6,\n\tticks: [10],\n\ttickStroke: \"#000\",\n\ttickStrokeOpacity: 1,\n};\n\nAxisTicks.helper = (props, scale) => {\n\tconst { orient, innerTickSize, tickFormat, tickPadding, fontSize, fontFamily } = props;\n\tconst { ticks: tickArguments, tickValues, tickStroke, tickStrokeOpacity } = props;\n\n\tconst ticks = isNotDefined(tickValues)\n\t\t? (scale.ticks\n\t\t\t? scale.ticks.apply(scale, tickArguments)\n\t\t\t: scale.domain())\n\t\t: tickValues;\n\n\tconst baseFormat = scale.tickFormat\n\t\t? scale.tickFormat.apply(scale, tickArguments)\n\t\t: identity;\n\n\tconst format = isNotDefined(tickFormat)\n\t\t? baseFormat\n\t\t: d => baseFormat(d) ? tickFormat(d) : \"\";\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\n\n\tlet tickTransform, x, y, x2, y2, dy, canvas_dy, textAnchor;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\ttickTransform = tickTransform_svg_axisX;\n\t\tx2 = 0;\n\t\ty2 = sign * innerTickSize;\n\t\tx = 0;\n\t\ty = sign * tickSpacing;\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\n\t\ttextAnchor = \"middle\";\n\t} else {\n\t\ttickTransform = tickTransform_svg_axisY;\n\t\tx2 = sign * innerTickSize;\n\t\ty2 = 0;\n\t\tx = sign * tickSpacing;\n\t\ty = 0;\n\t\tdy = \".32em\";\n\t\tcanvas_dy = (fontSize * .32);\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\n\t}\n\treturn { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, canvas_dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format };\n};\n\nAxisTicks.drawOnCanvasStatic = (props, ctx, xScale, yScale) => {\n\tprops = { ...AxisTicks.defaultProps, ...props };\n\n\tconst { orient } = props;\n\tconst xAxis = (orient === \"bottom\" || orient === \"top\");\n\n\tconst result = AxisTicks.helper(props, xAxis ? xScale : yScale);\n\n\tconst { tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = result;\n\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\n\n\tctx.font = `${ fontSize }px ${fontFamily}`;\n\tctx.fillStyle = tickStroke;\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\t// ctx.textBaseline = 'middle';\n\n\tresult.ticks.forEach((tick) => {\n\t\tTick.drawOnCanvasStatic(tick, ctx, result);\n\t});\n};\n\nexport default AxisTicks;\n"]}