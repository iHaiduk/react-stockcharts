{"version":3,"sources":["../../../../src/lib/tooltip/OHLCTooltip.js"],"names":["React","Component","PropTypes","format","timeFormat","displayValuesFor","GenericChartComponent","isDefined","functor","ToolTipText","ToolTipTSpanLabel","OHLCTooltip","props","renderSVG","bind","moreProps","xDisplayFormat","accessor","volumeFormat","ohlcFormat","percentFormat","displayTexts","chartConfig","width","height","displayXAccessor","currentItem","displayDate","open","high","low","close","volume","percent","na","item","originProp","origin","x","y","itemsToDisplay","children","displayTextsDefault","d","o","h","l","c","v","defaultProps","date","defaultDisplay","className","textFill","labelFill","onClick","fontFamily","fontSize"],"mappings":"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","file":"OHLCTooltip.js","sourcesContent":["\"use strict\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport displayValuesFor from \"./displayValuesFor\";\nimport GenericChartComponent from \"../GenericChartComponent\";\n\nimport { isDefined, functor } from \"../utils\";\nimport ToolTipText from \"./ToolTipText\";\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\n\nclass OHLCTooltip extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { displayValuesFor } = this.props;\n\t\tconst {\n\t\t\txDisplayFormat,\n\t\t\taccessor,\n\t\t\tvolumeFormat,\n\t\t\tohlcFormat,\n\t\t\tpercentFormat,\n\t\t\tdisplayTexts\n\t\t} = this.props;\n\n\t\tconst { chartConfig: { width, height } } = moreProps;\n\t\tconst { displayXAccessor } = moreProps;\n\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\n\n\t\tlet displayDate, open, high, low, close, volume, percent;\n\t\tdisplayDate = open = high = low = close = volume = percent = displayTexts.na;\n\n\t\tif (isDefined(currentItem) && isDefined(accessor(currentItem))) {\n\t\t\tconst item = accessor(currentItem);\n\t\t\tvolume = isDefined(item.volume) ? volumeFormat(item.volume) : displayTexts.na;\n\n\t\t\tdisplayDate = xDisplayFormat(displayXAccessor(item));\n\t\t\topen = ohlcFormat(item.open);\n\t\t\thigh = ohlcFormat(item.high);\n\t\t\tlow = ohlcFormat(item.low);\n\t\t\tclose = ohlcFormat(item.close);\n\t\t\tpercent = percentFormat((item.close - item.open) / item.open);\n\t\t}\n\n\t\tconst { origin: originProp } = this.props;\n\t\tconst origin = functor(originProp);\n\t\tconst [x, y] = origin(width, height);\n\n\t\tconst itemsToDisplay = {\n\t\t\tdisplayDate,\n\t\t\topen,\n\t\t\thigh,\n\t\t\tlow,\n\t\t\tclose,\n\t\t\tpercent,\n\t\t\tvolume,\n\t\t\tx,\n\t\t\ty\n\t\t};\n\t\treturn this.props.children(this.props, moreProps, itemsToDisplay);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tclip={false}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tdrawOn={[\"mousemove\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nOHLCTooltip.propTypes = {\n\tclassName: PropTypes.string,\n\taccessor: PropTypes.func,\n\txDisplayFormat: PropTypes.func,\n\tchildren: PropTypes.func,\n\tvolumeFormat: PropTypes.func,\n\tpercentFormat: PropTypes.func,\n\tohlcFormat: PropTypes.func,\n\torigin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tonClick: PropTypes.func,\n\tdisplayValuesFor: PropTypes.func,\n\ttextFill: PropTypes.string,\n\tlabelFill: PropTypes.string,\n\tdisplayTexts: PropTypes.object,\n};\n\nconst displayTextsDefault = {\n\td: \"Date: \",\n\to: \" O: \",\n\th: \" H: \",\n\tl: \" L: \",\n\tc: \" C: \",\n\tv: \" Vol: \",\n\tna: \"n/a\"\n};\n\nOHLCTooltip.defaultProps = {\n\taccessor: d => {\n\t\treturn {\n\t\t\tdate: d.date,\n\t\t\topen: d.open,\n\t\t\thigh: d.high,\n\t\t\tlow: d.low,\n\t\t\tclose: d.close,\n\t\t\tvolume: d.volume\n\t\t};\n\t},\n\txDisplayFormat: timeFormat(\"%Y-%m-%d\"),\n\tvolumeFormat: format(\".4s\"),\n\tpercentFormat: format(\".2%\"),\n\tohlcFormat: format(\".2f\"),\n\tdisplayValuesFor: displayValuesFor,\n\torigin: [0, 0],\n\tchildren: defaultDisplay,\n\tdisplayTexts: displayTextsDefault,\n};\n\nfunction defaultDisplay(props, moreProps, itemsToDisplay) {\n\n\t/* eslint-disable */\n\tconst {\n\t\tclassName,\n\t\ttextFill,\n\t\tlabelFill,\n\t\tonClick,\n\t\tfontFamily,\n\t\tfontSize,\n\t\tdisplayTexts\n\t} = props;\n\t/* eslint-enable */\n\n\tconst {\n\t\tdisplayDate,\n\t\topen,\n\t\thigh,\n\t\tlow,\n\t\tclose,\n\t\tvolume,\n\t\tx,\n\t\ty\n\t} = itemsToDisplay;\n\treturn (\n\t\t<g\n\t\t\tclassName={`react-stockcharts-tooltip-hover ${className}`}\n\t\t\ttransform={`translate(${x}, ${y})`}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<ToolTipText\n\t\t\t\tx={0}\n\t\t\t\ty={0}\n\t\t\t\tfontFamily={fontFamily}\n\t\t\t\tfontSize={fontSize}\n\t\t\t>\n\t\t\t\t<ToolTipTSpanLabel\n\t\t\t\t\tfill={labelFill}\n\t\t\t\t\tkey=\"label\"\n\t\t\t\t\tx={0}\n\t\t\t\t\tdy=\"5\">{displayTexts.d}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value\" fill={textFill}>{displayDate}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_O\">{displayTexts.o}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_O\" fill={textFill}>{open}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_H\">{displayTexts.h}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_H\" fill={textFill}>{high}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_L\">{displayTexts.l}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_L\" fill={textFill}>{low}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_C\">{displayTexts.c}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_C\" fill={textFill}>{close}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_Vol\">{displayTexts.v}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_Vol\" fill={textFill}>{volume}</tspan>\n\t\t\t</ToolTipText>\n\t\t</g>\n\t);\n}\n\nexport default OHLCTooltip;\n"]}